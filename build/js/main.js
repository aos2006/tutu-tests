'use strict';

var getOnlyBrackets = str => {
  var regexp = /[^()\[\]{},<>]/g;
  return str.replace(regexp, "");
};
var areBracketsInOrder = str => {
  let brackets = new Map([[']', '['], ['}', '{'], [')', '('], ['>', '<']]);
  let isClean = true;
  const iter = (i, len, isCleaning, brackets, cur, acc) => {
    if (i >= len && !isCleaning) return isCleaning && !acc.length;
    if (i >= len) return isCleaning && !acc.length;
    if (brackets.has(cur[i])) {
      let isCleaning = acc.pop() === brackets.get(cur[i]);
      return iter(++i, len, isCleaning, brackets, cur, acc);
    } else {
      acc.push(str[i]);
      return iter(++i, len, isCleaning, brackets, cur, acc);
    }
  };
  return iter(0, str.length, isClean, brackets, str, []);
};
var checkSyntax = str => {
  const newStr = getOnlyBrackets(str);
  return areBracketsInOrder(newStr) ? 0 : 1;
};
console.log(checkSyntax("---((++++))----") === 0);
console.log(checkSyntax("") === 0);
console.log(checkSyntax("before ( middle []) after ") === 0);
console.log(checkSyntax(") (") === 1);
console.log(checkSyntax("} {") === 1);
console.log(checkSyntax("<>(])") === 1);
console.log(checkSyntax("(  [  <>  ()  ]  <>  )") === 0);
console.log(checkSyntax("   (      [)") === 1);
'use strict';

let dsCount = (...args) => {
  const [str, ...rest] = args;
  const concatedSubstings = rest.join('');
  const iter = (count, position, curr, substring) => {
    if (curr.indexOf(substring, position) === -1) return count;

    let newPosition = curr.indexOf(substring, position);
    return iter(++count, ++newPosition, curr, substring);
  };

  return iter(0, 0, str.toLowerCase(), concatedSubstings.toLowerCase());
};

try {
  test(dsCount, ['ab___ab__', 'a', 'b'], 2);
  test(dsCount, ['___cd____', 'c', 'd'], 1);
  test(dsCount, ['de_______', 'd', 'e'], 1);
  test(dsCount, ['12_12__12', '1', '2'], 3);
  test(dsCount, ['_ba______', 'a', 'b'], 0);
  test(dsCount, ['_a__b____', 'a', 'b'], 0);
  test(dsCount, ['-ab-аb-ab', 'a', 'b'], 2);
  test(dsCount, ['aAa', 'a', 'a'], 2);
  console.info("Congratulations! All tests success passed.");
} catch (e) {
  console.error(e);
}

// Простая функция тестирования

function test(call, args, count, n) {
  let r = call.apply(n, args) === count;
  console.assert(r, `Finded items count: ${count}`);
  if (!r) throw "Test failed!";
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoZWNrU3ludGF4LmpzIiwiZHNDb3VudC5qcyJdLCJuYW1lcyI6WyJnZXRPbmx5QnJhY2tldHMiLCJzdHIiLCJyZWdleHAiLCJyZXBsYWNlIiwiYXJlQnJhY2tldHNJbk9yZGVyIiwiYnJhY2tldHMiLCJNYXAiLCJpc0NsZWFuIiwiaXRlciIsImkiLCJsZW4iLCJpc0NsZWFuaW5nIiwiY3VyIiwiYWNjIiwibGVuZ3RoIiwiaGFzIiwicG9wIiwiZ2V0IiwicHVzaCIsImNoZWNrU3ludGF4IiwibmV3U3RyIiwiY29uc29sZSIsImxvZyIsImRzQ291bnQiLCJhcmdzIiwicmVzdCIsImNvbmNhdGVkU3Vic3RpbmdzIiwiam9pbiIsImNvdW50IiwicG9zaXRpb24iLCJjdXJyIiwic3Vic3RyaW5nIiwiaW5kZXhPZiIsIm5ld1Bvc2l0aW9uIiwidG9Mb3dlckNhc2UiLCJ0ZXN0IiwiaW5mbyIsImUiLCJlcnJvciIsImNhbGwiLCJuIiwiciIsImFwcGx5IiwiYXNzZXJ0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFDQSxJQUFJQSxrQkFBbUJDLEdBQUQsSUFBUztBQUM3QixNQUFJQyxTQUFTLGlCQUFiO0FBQ0EsU0FBUUQsR0FBRCxDQUFNRSxPQUFOLENBQWNELE1BQWQsRUFBc0IsRUFBdEIsQ0FBUDtBQUNELENBSEQ7QUFJQSxJQUFJRSxxQkFBc0JILEdBQUQsSUFBUztBQUNoQyxNQUFJSSxXQUFXLElBQUlDLEdBQUosQ0FDWCxDQUNJLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FESixFQUVJLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FGSixFQUdJLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FISixFQUlJLENBQUMsR0FBRCxFQUFNLEdBQU4sQ0FKSixDQURXLENBQWY7QUFRQSxNQUFJQyxVQUFVLElBQWQ7QUFDQSxRQUFNQyxPQUFPLENBQUNDLENBQUQsRUFBSUMsR0FBSixFQUFTQyxVQUFULEVBQXFCTixRQUFyQixFQUErQk8sR0FBL0IsRUFBb0NDLEdBQXBDLEtBQTRDO0FB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Q0FBdkM7QUFDQVksT0FBS1osT0FBTCxFQUFjLENBQUMsV0FBRCxFQUFjLEdBQWQsRUFBbUIsR0FBbkIsQ0FBZCxFQUF1QyxDQUF2QztBQUNBWSxPQUFLWixPQUFMLEVBQWMsQ0FBQyxXQUFELEVBQWMsR0FBZCxFQUFtQixHQUFuQixDQUFkLEVBQXVDLENBQXZDO0FBQ0FZLE9BQUtaLE9BQUwsRUFBYyxDQUFDLFdBQUQsRUFBYyxHQUFkLEVBQW1CLEdBQW5CLENBQWQsRUFBdUMsQ0FBdkM7QUFDQVksT0FBS1osT0FBTCxFQUFjLENBQUMsV0FBRCxFQUFjLEdBQWQsRUFBbUIsR0FBbkIsQ0FBZCxFQUF1QyxDQUF2QztBQUNBWSxPQUFLWixPQUFMLEVBQWMsQ0FBQyxXQUFELEVBQWMsR0FBZCxFQUFtQixHQUFuQixDQUFkLEVBQXVDLENBQXZDO0FBQ0FZLE9BQUtaLE9BQUwsRUFBYyxDQUFDLEtBQUQsRUFBUSxHQUFSLEVBQWEsR0FBYixDQUFkLEVBQWlDLENBQWpDO0FBQ0FGLFVBQVFlLElBQVIsQ0FBYSw0Q0FBYjtBQUNELENBVkQsQ0FVRSxPQUFNQyxDQUFOLEVBQVM7QUFDVGhCLFVBQVFpQixLQUFSLENBQWNELENBQWQ7QUFDRDs7QUFFRDs7QUFFQSxTQUFTRixJQUFULENBQWNJLElBQWQsRUFBb0JmLElBQXBCLEVBQTBCSSxLQUExQixFQUFpQ1ksQ0FBakMsRUFBb0M7QUFDbEMsTUFBSUMsSUFBS0YsS0FBS0csS0FBTCxDQUFXRixDQUFYLEVBQWNoQixJQUFkLE1BQXdCSSxLQUFqQztBQUNBUCxVQUFRc0IsTUFBUixDQUFlRixDQUFmLEVBQW1CLHVCQUFzQmIsS0FBTSxFQUEvQztBQUNBLE1BQUksQ0FBQ2EsQ0FBTCxFQUFRLE1BQU0sY0FBTjtBQUNUIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG52YXIgZ2V0T25seUJyYWNrZXRzID0gKHN0cikgPT4ge1xuICB2YXIgcmVnZXhwID0gL1teKClcXFtcXF17fSw8Pl0vZztcbiAgcmV0dXJuIChzdHIpLnJlcGxhY2UocmVnZXhwLCBcIlwiKTtcbn07XG52YXIgYXJlQnJhY2tldHNJbk9yZGVyID0gKHN0cikgPT4ge1xuICBsZXQgYnJhY2tldHMgPSBuZXcgTWFwKFxuICAgICAgW1xuICAgICAgICAgIFsnXScsICdbJ10sXG4gICAgICAgICAgWyd9JywgJ3snXSxcbiAgICAgICAgICBbJyknLCAnKCddLFxuICAgICAgICAgIFsnPicsICc8J11cbiAgICAgIF1cbiAgKTtcbiAgbGV0IGlzQ2xlYW4gPSB0cnVlO1xuICBjb25zdCBpdGVyID0gKGksIGxlbiwgaXNDbGVhbmluZywgYnJhY2tldHMsIGN1ciwgYWNjKSA9PiB7XG4gICAgaWYgKGkgPj0gbGVuICYmICFpc0NsZWFuaW5nKSByZXR1cm4gaXNDbGVhbmluZyAmJiAhYWNjLmxlbmd0aDtcbiAgICBpZiAoaSA+PSBsZW4pIHJldHVybiBpc0NsZWFuaW5nICYmICFhY2MubGVuZ3RoO1xuICAgIGlmIChicmFja2V0cy5oYXMoY3VyW2ldKSkge1xuICAgICAgbGV0IGlzQ2xlYW5pbmcgPSBhY2MucG9wKCkgPT09IGJyYWNrZXRzLmdldChjdXJbaV0pO1xuICAgICAgcmV0dXJuIGl0ZXIoKytpLCBsZW4sIGlzQ2xlYW5pbmcsIGJyYWNrZXRzLCBjdXIsIGFjYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFjYy5wdXNoKHN0cltpXSk7XG4gICAgICByZXR1cm4gaXRlcigrK2ksIGxlbiwgaXNDbGVhbmluZywgYnJhY2tldHMsIGN1ciwgYWNjKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGl0ZXIoMCwgc3RyLmxlbmd0aCwgaXNDbGVhbiwgYnJhY2tldHMsIHN0ciwgW10pXG59O1xudmFyIGNoZWNrU3ludGF4ID0gKHN0cikgPT4ge1xuICBjb25zdCBuZXdTdHIgPSBnZXRPbmx5QnJhY2tldHMoc3RyKTtcbiAgcmV0dXJuIGFyZUJyYWNrZXRzSW5PcmRlcihuZXdTdHIpID8gMCA6IDE7XG59O1xuY29uc29sZS5sb2cgKGNoZWNrU3ludGF4KFwiLS0tKCgrKysrKSktLS0tXCIpID09PSAwKTtcbmNvbnNvbGUubG9nIChjaGVja1N5bnRheCAoXCJcIikgPT09IDApO1xuY29uc29sZS5sb2cgKGNoZWNrU3ludGF4IChcImJlZm9yZSAoIG1pZGRsZSBbXSkgYWZ0ZXIgXCIpID09PSAwKTtcbmNvbnNvbGUubG9nIChjaGVja1N5bnRheCAoXCIpIChcIikgPT09IDEpO1xuY29uc29sZS5sb2cgKGNoZWNrU3ludGF4IChcIn0ge1wiKSA9PT0gMSk7XG5jb25zb2xlLmxvZyAoY2hlY2tTeW50YXggKFwiPD4oXSlcIikgPT09IDEpO1xuY29uc29sZS5sb2cgKGNoZWNrU3ludGF4IChcIiggIFsgIDw+ICAoKSAgXSAgPD4gIClcIikgPT09IDApO1xuY29uc29sZS5sb2cgKGNoZWNrU3ludGF4IChcIiAgICggICAgICBbKVwiKSA9PT0gMSk7XG5cbiIsIid1c2Ugc3RyaWN0JztcbmxldCBkc0NvdW50ID0gKC4uLmFyZ3MpID0+IHtcbiAgY29uc3QgW3N0ciwgLi4ucmVzdF0gPSBhcmdzO1xuICBjb25zdCBjb25jYXRlZFN1YnN0aW5ncyA9IHJlc3Quam9pbignJyk7XG4gIGNvbnN0IGl0ZXIgPSAoY291bnQsIHBvc2l0aW9uLCBjdXJyLCBzdWJzdHJpbmcpID0+IHtcbiAgICAgIGlmKGN1cnIuaW5kZXhPZihzdWJzdHJpbmcsIHBvc2l0aW9uKSA9PT0gLTEpIHJldHVybiBjb3VudDtcblxuICAgICAgbGV0IG5ld1Bvc2l0aW9uID0gY3Vyci5pbmRleE9mKHN1YnN0cmluZywgcG9zaXRpb24pO1xuICAgICAgcmV0dXJuIGl0ZXIoKytjb3VudCwgKytuZXdQb3NpdGlvbiwgY3Vyciwgc3Vic3RyaW5nKTtcbiAgfVxuXG4gIHJldHVybiBpdGVyKDAsIDAsIHN0ci50b0xvd2VyQ2FzZSgpLCBjb25jYXRlZFN1YnN0aW5ncy50b0xvd2VyQ2FzZSgpKVxuXG5cbn1cblxudHJ5IHtcbiAgdGVzdChkc0NvdW50LCBbJ2FiX19fYWJfXycsICdhJywgJ2InXSwgMik7XG4gIHRlc3QoZHNDb3VudCwgWydfX19jZF9fX18nLCAnYycsICdkJ10sIDEpO1xuICB0ZXN0KGRzQ291bnQsIFsnZGVfX19fX19fJywgJ2QnLCAnZSddLCAxKTtcbiAgdGVzdChkc0NvdW50LCBbJzEyXzEyX18xMicsICcxJywgJzInXSwgMyk7XG4gIHRlc3QoZHNDb3VudCwgWydfYmFfX19fX18nLCAnYScsICdiJ10sIDApO1xuICB0ZXN0KGRzQ291bnQsIFsnX2FfX2JfX19fJywgJ2EnLCAnYiddLCAwKTtcbiAgdGVzdChkc0NvdW50LCBbJy1hYi3QsGItYWInLCAnYScsICdiJ10sIDIpO1xuICB0ZXN0KGRzQ291bnQsIFsnYUFhJywgJ2EnLCAnYSddLCAyKTtcbiAgY29uc29sZS5pbmZvKFwiQ29uZ3JhdHVsYXRpb25zISBBbGwgdGVzdHMgc3VjY2VzcyBwYXNzZWQuXCIpO1xufSBjYXRjaChlKSB7XG4gIGNvbnNvbGUuZXJyb3IoZSk7XG59XG5cbi8vINCf0YDQvtGB0YLQsNGPINGE0YPQvdC60YbQuNGPINGC0LXRgdGC0LjRgNC+0LLQsNC90LjRj1xuXG5mdW5jdGlvbiB0ZXN0KGNhbGwsIGFyZ3MsIGNvdW50LCBuKSB7XG4gIGxldCByID0gKGNhbGwuYXBwbHkobiwgYXJncykgPT09IGNvdW50KTtcbiAgY29uc29sZS5hc3NlcnQociwgYEZpbmRlZCBpdGVtcyBjb3VudDogJHtjb3VudH1gKTtcbiAgaWYgKCFyKSB0aHJvdyBcIlRlc3QgZmFpbGVkIVwiO1xufVxuXG4iXX0=
